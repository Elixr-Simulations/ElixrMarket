@page
@model ElixrMarket.Web.Pages.StoreModel
@{
}

<div id="store">
    <div id="filter-container">
        <div>
            <span>Genres:</span>
            <select id="categories" multiple="multiple">
                <option value="education">Education</option>
                <option value="medical">Medical</option>
                <option value="enterprise">Enterprise</option>
            </select>
        </div>
        <div>
            <span>Application Types:</span>
            <select id="app-types" multiple="multiple">
                <option value="VR">VR</option>
                <option value="AR">AR</option>
            </select>
        </div>
    </div>
    <hr />
    <div id="list-container">
        @foreach (var product in Model.Products)
        {
            string href = $"/Details/{product.Id}";

            <input type="hidden" id="@product.Id-id" value="@product.Id" />
            <input type="hidden" id="@product.Id-price" value="@product.Price" />
            <input type="hidden" id="@product.Id-name" value="@product.Name" />
            <div class="product-container" >
                <a class="img-container" href="@href">
                    <img src="~/product-files/@product.Id/thumb.jpg" alt="Main image" />
                </a>
                <div class="text-container">
                    <a class="detail-link" href="@href">@product.Name - $@product.Price</a>
                    <button class="cart-btn" onclick="addToCart(@product.Id)"><i class="fas fa-cart-plus"></i> </button>
                </div>
            </div>
            
        }
    </div>

    <script src="~/js/add-cart.js"></script>
    <script>
        initializeCart()

        @if (Model.RedirectFromCheckout)
        {
            <text>Snackbar.show({ pos: 'bottom-center', text: 'Congratulations on your purchase.' })</text>
        }
    </script>
    <script>
        // initalize cart on page load
        initializeCart();
        $(document).ready(function () {
            $('#categories, #app-types').multiselect({
                includeSelectAllOption: true,
            });
        });
    </script>

    <style>
        #store #list-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
            gap: 1rem;
        }

        #store #filter-container {
            display: flex;
            gap: 2rem;
            background-color: white;
            border: 1px solid #B8B8B8;
            border-radius: .5rem;
            padding: .5rem 3rem;
        }

            #store #filter-container > div {
                border-right: 1px solid grey;
                padding-right: 1rem;
                margin-top: .5rem;
                margin-bottom: .5rem;
            }

        #store #categories #app-types {
            background-color: white;
        }

        #store .product-container {
            border-radius: .5rem;
            flex: 21%;
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid #B8B8B8;
        }

        #store .img-container {

            display: flex;
            justify-content: center;
            height: 7rem;
            width: 100%;
        }

        #store .img-container:hover {
            background-color: #e9e9e9;
            cursor: pointer;
        }

            #store .img-container > img {
                height: 100%;
            }

        #store .text-container {
            padding: 1rem;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        #store a {
            text-decoration: none;
            color: black;
        }

        #store .detail-link:hover {
            color: darkslategray;
            text-decoration: underline;
        }

        #store .cart-btn {
            flex-grow: 0;
            border-radius: .3rem;
            border: 1px solid grey;
            padding: .3rem;
        }
    </style>
</div>